<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุนูุงุตุฑ ุงููุต ุงูุณุฑุฏู - ุงูุตู ุงูุฎุงูุณ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&display=swap');
        
        body {
            font-family: 'Amiri', serif;
        }
        
        .element-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .element-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        
        .story-text {
            background: linear-gradient(135deg, #fef7cd 0%, #fef3c7 100%);
            border-right: 4px solid #f59e0b;
        }
        
        .highlight {
            background-color: #fbbf24;
            padding: 2px 4px;
            border-radius: 4px;
            font-weight: bold;
        }
        
        .animate-bounce-slow {
            animation: bounce 2s infinite;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.6s ease-out;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-purple-50 min-h-screen">
    <!-- Header -->
    <header class="bg-gradient-to-r from-blue-600 to-purple-600 text-white py-8 text-center">
        <h1 class="text-4xl font-bold mb-2">๐ฐ ุนูุงุตุฑ ุงููุต ุงูุณุฑุฏู ๐</h1>
        <p class="text-xl">ููุตู ุงูุฎุงูุณ ุงูุงุจุชุฏุงุฆู</p>
    </header>

    <div class="container mx-auto px-4 py-8">
        <!-- Introduction -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-8 text-center">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">๐ ูุง ูู ุงููุต ุงูุณุฑุฏูุ</h2>
            <p class="text-lg text-gray-600 leading-relaxed">
                ุงููุต ุงูุณุฑุฏู ูู ูุต ูุตุตู ูุชุถูู ุฃุญุฏุงุซุงู ูุชุชุงุจุนุฉ ูุชูุงููุฉุ ููุญุชูู ุนูู ุนูุงุตุฑ ูููุฉ ุชุฌุนู ุงููุตุฉ ูุดููุฉ ููููููุฉ
            </p>
        </div>

        <!-- Narrative Elements Section -->
        <div class="bg-white rounded-xl shadow-lg p-8 mb-8">
            <h2 class="text-2xl font-bold text-center mb-6 text-gray-800">๐ญ ุนูุงุตุฑ ุงููุต ุงูุณุฑุฏู</h2>
            
            <div class="grid md:grid-cols-3 gap-6 mb-8">
                <!-- ุงูุจุฏุงูุฉ -->
                <div class="element-card bg-white rounded-xl shadow-lg p-6 border-t-4 border-emerald-500" onclick="showNarrativeElement('beginning')">
                    <div class="text-center mb-4">
                        <div class="text-6xl mb-2">๐</div>
                        <h3 class="text-xl font-bold text-emerald-600">ุงูุจุฏุงูุฉ</h3>
                    </div>
                    <p class="text-gray-600 text-center">ุชูุฏูู ุงูุดุฎุตูุงุช ูุงูููุงู ูุงูุฒูุงู</p>
                </div>

                <!-- ุงูุชุญูู -->
                <div class="element-card bg-white rounded-xl shadow-lg p-6 border-t-4 border-amber-500" onclick="showNarrativeElement('transformation')">
                    <div class="text-center mb-4">
                        <div class="text-6xl mb-2">๐</div>
                        <h3 class="text-xl font-bold text-amber-600">ุงูุชุญูู</h3>
                    </div>
                    <p class="text-gray-600 text-center">ุงููุดููุฉ ุฃู ุงูุตุฑุงุน ุงูุฑุฆูุณู</p>
                </div>

                <!-- ุงูููุงูุฉ -->
                <div class="element-card bg-white rounded-xl shadow-lg p-6 border-t-4 border-rose-500" onclick="showNarrativeElement('ending')">
                    <div class="text-center mb-4">
                        <div class="text-6xl mb-2">๐ฏ</div>
                        <h3 class="text-xl font-bold text-rose-600">ุงูููุงูุฉ</h3>
                    </div>
                    <p class="text-gray-600 text-center">ุญู ุงููุดููุฉ ูุงูุฎุงุชูุฉ</p>
                </div>
            </div>
        </div>

        <!-- Story Example Section -->
        <div class="bg-white rounded-xl shadow-lg p-8 mb-8">
            <h2 class="text-2xl font-bold text-center mb-6 text-gray-800">๐ ุงููุซุงู ุงูุชูุถูุญู - ูุตุฉ ุณุงูู ุงูุฃุฑูุจ</h2>
            
            <div class="story-text p-6 rounded-lg mb-6">
                <p class="text-lg leading-relaxed text-gray-800">
                    ูู <span class="element-time cursor-pointer transition-all duration-300 p-1 rounded">ููู ูุดูุณ ูู ุฃูุงู ุงูุฑุจูุน</span>ุ ูุงู ููุงู <span class="element-character cursor-pointer transition-all duration-300 p-1 rounded">ุฃุฑูุจ ุตุบูุฑ ุฐูู ููุฏุนู ุณุงูู</span> ูุนูุด ูู <span class="element-place cursor-pointer transition-all duration-300 p-1 rounded">ุบุงุจุฉ ุฌูููุฉ</span> ูููุฆุฉ ุจุงูุฃุดุฌุงุฑ ุงูุฎุถุฑุงุก ูุงูุฒููุฑ ุงูููููุฉ.
                </p>
                <p class="text-lg leading-relaxed text-gray-800 mt-4">
                    ุฎุฑุฌ ุณุงูู ูู ุจูุชู ููุจุญุซ ุนู <span class="element-goal cursor-pointer transition-all duration-300 p-1 rounded">ุงูุฌุฒุฑ ุงููุฐูุฐ</span>ุ ููููู ูุดู ูุซูุฑุงู ุญุชู <span class="element-problem cursor-pointer transition-all duration-300 p-1 rounded">ุถู ุงูุทุฑูู</span>. ุดุนุฑ ุณุงูู ุจุงูุฎูู ุงูุดุฏูุฏ ู<span class="element-climax cursor-pointer transition-all duration-300 p-1 rounded">ุจุฏุฃ ูุจูู</span>.
                </p>
                <p class="text-lg leading-relaxed text-gray-800 mt-4">
                    ูุฌุฃุฉุ <span class="element-solution cursor-pointer transition-all duration-300 p-1 rounded">ุชุฐูุฑ ุณุงูู ูุตูุญุฉ ุฃูู</span>: "ุฅุฐุง ุถููุช ุงูุทุฑููุ ุงุชุจุน ุฃุซุฑ ุฃูุฏุงูู ููุนูุฏุฉ". ูุนู ุณุงูู ุฐูู ู<span class="element-resolution cursor-pointer transition-all duration-300 p-1 rounded">ูุฌุฏ ุทุฑููู ุฅูู ุงูุจูุช ุจุฃูุงู</span>ุ ูุชุนูู ุฃู <span class="element-lesson cursor-pointer transition-all duration-300 p-1 rounded">ุงูุฐูุงุก ูุงููุฏูุก ูุญูุงู ุฃู ูุดููุฉ</span>.
                </p>
            </div>
            
            <!-- Legend for story elements -->
            <div class="bg-gray-50 p-4 rounded-lg mb-4">
                <h4 class="text-lg font-bold text-gray-700 mb-3 text-center">๐จ ุฏููู ุงูุฃููุงู</h4>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-3 text-sm">
                    <div class="flex items-center">
                        <span class="w-4 h-4 bg-blue-400 rounded ml-2"></span>
                        <span>๐ ุงูุฒูุงู</span>
                    </div>
                    <div class="flex items-center">
                        <span class="w-4 h-4 bg-purple-400 rounded ml-2"></span>
                        <span>๐ค ุงูุดุฎุตูุฉ</span>
                    </div>
                    <div class="flex items-center">
                        <span class="w-4 h-4 bg-green-400 rounded ml-2"></span>
                        <span>๐๏ธ ุงูููุงู</span>
                    </div>
                    <div class="flex items-center">
                        <span class="w-4 h-4 bg-yellow-400 rounded ml-2"></span>
                        <span>๐ฏ ุงููุฏู</span>
                    </div>
                    <div class="flex items-center">
                        <span class="w-4 h-4 bg-orange-400 rounded ml-2"></span>
                        <span>โ๏ธ ุงููุดููุฉ</span>
                    </div>
                    <div class="flex items-center">
                        <span class="w-4 h-4 bg-red-400 rounded ml-2"></span>
                        <span>๐ฅ ุงูุฐุฑูุฉ</span>
                    </div>
                    <div class="flex items-center">
                        <span class="w-4 h-4 bg-teal-400 rounded ml-2"></span>
                        <span>๐ก ุงูุญู</span>
                    </div>
                    <div class="flex items-center">
                        <span class="w-4 h-4 bg-emerald-400 rounded ml-2"></span>
                        <span>โ ุงูููุงูุฉ</span>
                    </div>
                </div>
            </div>
            
            <div class="text-center space-x-3">
                <button onclick="highlightAllElements()" class="bg-gradient-to-r from-purple-500 to-pink-500 text-white px-6 py-3 rounded-full font-bold hover:from-purple-600 hover:to-pink-600 transition-all duration-300 transform hover:scale-105">
                    โจ ุฅุจุฑุงุฒ ุฌููุน ุงูุนูุงุตุฑ
                </button>
                <button onclick="highlightByImportance()" class="bg-gradient-to-r from-blue-500 to-indigo-500 text-white px-6 py-3 rounded-full font-bold hover:from-blue-600 hover:to-indigo-600 transition-all duration-300 transform hover:scale-105">
                    ๐ ุฅุจุฑุงุฒ ุญุณุจ ุงูุฃูููุฉ
                </button>
                <button onclick="resetHighlights()" class="bg-gray-500 text-white px-6 py-3 rounded-full font-bold hover:bg-gray-600 transition-all duration-300 transform hover:scale-105">
                    ๐ ุฅุฒุงูุฉ ุงูุฅุจุฑุงุฒ
                </button>
            </div>
        </div>

        <!-- Plot Pyramid -->
        <div class="bg-white rounded-xl shadow-lg p-8 mb-8">
            <h2 class="text-2xl font-bold text-center mb-6 text-gray-800">๐ ุงููุฑู ุงูุณุฑุฏู - ุฏุฑุฌุงุช ุงูุญุจูุฉ</h2>
            
            <div class="relative max-w-4xl mx-auto">
                <!-- SVG Pyramid -->
                <svg viewBox="0 0 800 500" class="w-full h-auto">
                    <!-- Background gradient -->
                    <defs>
                        <linearGradient id="pyramidGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#e0f2fe;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#b3e5fc;stop-opacity:1" />
                        </linearGradient>
                        <linearGradient id="lineGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" style="stop-color:#10b981;stop-opacity:1" />
                            <stop offset="25%" style="stop-color:#f59e0b;stop-opacity:1" />
                            <stop offset="50%" style="stop-color:#ef4444;stop-opacity:1" />
                            <stop offset="75%" style="stop-color:#f59e0b;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#10b981;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                    
                    <!-- Pyramid background -->
                    <polygon points="50,450 400,50 750,450" fill="url(#pyramidGradient)" stroke="#0284c7" stroke-width="2" opacity="0.3"/>
                    
                    <!-- Plot line -->
                    <polyline points="50,450 200,350 300,250 400,50 500,150 600,250 750,400" 
                              fill="none" stroke="url(#lineGradient)" stroke-width="6" stroke-linecap="round"/>
                    
                    <!-- Plot points -->
                    <!-- ุงูุจุฏุงูุฉ ุงููุงุฏุฆุฉ -->
                    <circle cx="50" cy="450" r="12" fill="#10b981" stroke="white" stroke-width="3"/>
                    <text x="50" y="480" text-anchor="middle" class="text-sm font-bold fill-emerald-600">ุงูุจุฏุงูุฉ ุงููุงุฏุฆุฉ</text>
                    
                    <!-- ุธููุฑ ุงููุดููุฉ -->
                    <circle cx="200" cy="350" r="12" fill="#f59e0b" stroke="white" stroke-width="3"/>
                    <text x="200" y="380" text-anchor="middle" class="text-sm font-bold fill-amber-600">ุธููุฑ ุงููุดููุฉ</text>
                    
                    <!-- ุชุตุงุนุฏ ุงูุชูุชุฑ -->
                    <circle cx="300" cy="250" r="12" fill="#f97316" stroke="white" stroke-width="3"/>
                    <text x="300" y="280" text-anchor="middle" class="text-sm font-bold fill-orange-600">ุชุตุงุนุฏ ุงูุชูุชุฑ</text>
                    
                    <!-- ุงูุฐุฑูุฉ - ุงูุชุญูู ุงูุฌุฐุฑู -->
                    <circle cx="400" cy="50" r="15" fill="#ef4444" stroke="white" stroke-width="4"/>
                    <text x="400" y="30" text-anchor="middle" class="text-sm font-bold fill-red-600">ุงูุฐุฑูุฉ</text>
                    <text x="400" y="15" text-anchor="middle" class="text-xs fill-red-500">(ุงูุชุญูู ุงูุฌุฐุฑู)</text>
                    
                    <!-- ุงูุจุญุซ ุนู ุงูุญู -->
                    <circle cx="500" cy="150" r="12" fill="#f59e0b" stroke="white" stroke-width="3"/>
                    <text x="500" y="180" text-anchor="middle" class="text-sm font-bold fill-amber-600">ุงูุจุญุซ ุนู ุงูุญู</text>
                    
                    <!-- ุชุทุจูู ุงูุญู -->
                    <circle cx="600" cy="250" r="12" fill="#84cc16" stroke="white" stroke-width="3"/>
                    <text x="600" y="280" text-anchor="middle" class="text-sm font-bold fill-lime-600">ุชุทุจูู ุงูุญู</text>
                    
                    <!-- ุงูููุงูุฉ ุงููุงุฏุฆุฉ -->
                    <circle cx="750" cy="400" r="12" fill="#10b981" stroke="white" stroke-width="3"/>
                    <text x="750" y="430" text-anchor="middle" class="text-sm font-bold fill-emerald-600">ุงูููุงูุฉ ุงููุงุฏุฆุฉ</text>
                </svg>
                
                <!-- Story stages description -->
                <div class="grid md:grid-cols-3 gap-4 mt-8">
                    <!-- ุงูุจุฏุงูุฉ -->
                    <div class="bg-emerald-50 p-4 rounded-lg border-r-4 border-emerald-500">
                        <h4 class="font-bold text-emerald-700 mb-2">๐ ุงูุจุฏุงูุฉ</h4>
                        <p class="text-sm text-gray-700">ุณุงูู ูุนูุด ุจุณูุงู ูู ุงูุบุงุจุฉ ุงูุฌูููุฉ</p>
                    </div>
                    
                    <!-- ุงููุณุท - ุงูุชุญูู -->
                    <div class="bg-red-50 p-4 rounded-lg border-r-4 border-red-500">
                        <h4 class="font-bold text-red-700 mb-2">๐ฅ ุงูุฐุฑูุฉ - ุงูุชุญูู</h4>
                        <p class="text-sm text-gray-700">ุณุงูู ูุถู ุงูุทุฑูู ููุดุนุฑ ุจุงูุฎูู ุงูุดุฏูุฏ</p>
                    </div>
                    
                    <!-- ุงูููุงูุฉ -->
                    <div class="bg-emerald-50 p-4 rounded-lg border-r-4 border-emerald-500">
                        <h4 class="font-bold text-emerald-700 mb-2">๐ฏ ุงูููุงูุฉ</h4>
                        <p class="text-sm text-gray-700">ุณุงูู ูุนูุฏ ุจุฃูุงู ููุชุนูู ุฏุฑุณุงู ูููุงู</p>
                    </div>
                </div>
                
                <!-- Interactive buttons -->
                <div class="text-center mt-6">
                    <button onclick="animatePlotLine()" class="bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-3 rounded-full font-bold hover:from-blue-600 hover:to-purple-600 transition-all duration-300 transform hover:scale-105 ml-4">
                        ๐ฌ ุชุชุจุน ูุณุงุฑ ุงููุตุฉ
                    </button>
                    <button onclick="showPlotDetails()" class="bg-gradient-to-r from-green-500 to-teal-500 text-white px-6 py-3 rounded-full font-bold hover:from-green-600 hover:to-teal-600 transition-all duration-300 transform hover:scale-105">
                        ๐ ุดุฑุญ ุชูุตููู
                    </button>
                </div>
            </div>
        </div>

        <!-- Detailed Explanation Area -->
        <div id="explanation-area" class="bg-white rounded-xl shadow-lg p-8 mb-8 hidden">
            <div id="explanation-content"></div>
        </div>

        <!-- Interactive Quiz -->
        <div class="bg-white rounded-xl shadow-lg p-8">
            <h2 class="text-2xl font-bold text-center mb-6 text-gray-800">๐ฏ ุงุฎุชุจุฑ ูุนูููุงุชู</h2>
            
            <div id="quiz-container">
                <!-- Question 1: Concept -->
                <div class="quiz-question mb-8 p-6 bg-blue-50 rounded-lg">
                    <h3 class="text-lg font-bold mb-4 text-blue-700">ุงูุณุคุงู ุงูุฃูู: ุงูููููู ๐ง</h3>
                    <p class="text-lg mb-4 font-semibold">ูุง ูู ุงูุนูุตุฑ ุงูุฐู ููุซู ุฃุนูู ููุทุฉ ูู ุงููุฑู ุงูุณุฑุฏูุ</p>
                    <div class="grid grid-cols-2 gap-4">
                        <button onclick="checkAnswer(this, false, 1)" class="quiz-option bg-white hover:bg-blue-100 p-4 rounded-lg transition-colors border">ุงูุจุฏุงูุฉ</button>
                        <button onclick="checkAnswer(this, false, 1)" class="quiz-option bg-white hover:bg-blue-100 p-4 rounded-lg transition-colors border">ุงูููุงูุฉ</button>
                        <button onclick="checkAnswer(this, true, 1)" class="quiz-option bg-white hover:bg-blue-100 p-4 rounded-lg transition-colors border">ุงูุชุญูู (ุงูุฐุฑูุฉ)</button>
                        <button onclick="checkAnswer(this, false, 1)" class="quiz-option bg-white hover:bg-blue-100 p-4 rounded-lg transition-colors border">ุงูุดุฎุตูุงุช</button>
                    </div>
                </div>

                <!-- Question 2: Application -->
                <div class="quiz-question mb-8 p-6 bg-green-50 rounded-lg">
                    <h3 class="text-lg font-bold mb-4 text-green-700">ุงูุณุคุงู ุงูุซุงูู: ุงูุชุทุจูู ๐</h3>
                    <p class="text-lg mb-4 font-semibold">ูู ูุตุฉ ุณุงูู ุงูุฃุฑูุจุ ูุง ูู ุนูุตุฑ "ุงูุฐุฑูุฉ"ุ</p>
                    <div class="grid grid-cols-1 gap-3">
                        <button onclick="checkAnswer(this, false, 2)" class="quiz-option bg-white hover:bg-green-100 p-4 rounded-lg transition-colors border text-right">ุณุงูู ูุนูุด ูู ุงูุบุงุจุฉ ุจุณูุงู</button>
                        <button onclick="checkAnswer(this, true, 2)" class="quiz-option bg-white hover:bg-green-100 p-4 rounded-lg transition-colors border text-right">ุณุงูู ูุถู ุงูุทุฑูู ููุจูู ูู ุงูุฎูู</button>
                        <button onclick="checkAnswer(this, false, 2)" class="quiz-option bg-white hover:bg-green-100 p-4 rounded-lg transition-colors border text-right">ุณุงูู ูุชุฐูุฑ ูุตูุญุฉ ุฃูู</button>
                        <button onclick="checkAnswer(this, false, 2)" class="quiz-option bg-white hover:bg-green-100 p-4 rounded-lg transition-colors border text-right">ุณุงูู ูุนูุฏ ุฅูู ุงูุจูุช ุจุฃูุงู</button>
                    </div>
                </div>

                <!-- Question 3: Concept -->
                <div class="quiz-question mb-8 p-6 bg-purple-50 rounded-lg">
                    <h3 class="text-lg font-bold mb-4 text-purple-700">ุงูุณุคุงู ุงูุซุงูุซ: ุงูููููู ๐ญ</h3>
                    <p class="text-lg mb-4 font-semibold">ุฃู ูู ุงูุนูุงุตุฑ ุงูุชุงููุฉ ูููุฏู ูู "ุงูุจุฏุงูุฉ" ูู ุงููุต ุงูุณุฑุฏูุ</p>
                    <div class="grid grid-cols-2 gap-4">
                        <button onclick="checkAnswer(this, true, 3)" class="quiz-option bg-white hover:bg-purple-100 p-4 rounded-lg transition-colors border">ุงูุดุฎุตูุงุช ูุงูููุงู</button>
                        <button onclick="checkAnswer(this, false, 3)" class="quiz-option bg-white hover:bg-purple-100 p-4 rounded-lg transition-colors border">ุญู ุงููุดููุฉ</button>
                        <button onclick="checkAnswer(this, false, 3)" class="quiz-option bg-white hover:bg-purple-100 p-4 rounded-lg transition-colors border">ุงูุฐุฑูุฉ</button>
                        <button onclick="checkAnswer(this, false, 3)" class="quiz-option bg-white hover:bg-purple-100 p-4 rounded-lg transition-colors border">ุงูุตุฑุงุน ุงูุฑุฆูุณู</button>
                    </div>
                </div>

                <!-- Question 4: Application -->
                <div class="quiz-question mb-8 p-6 bg-orange-50 rounded-lg">
                    <h3 class="text-lg font-bold mb-4 text-orange-700">ุงูุณุคุงู ุงูุฑุงุจุน: ุงูุชุทุจูู ๐</h3>
                    <p class="text-lg mb-4 font-semibold">ุญุณุจ ุงููุฑู ุงูุณุฑุฏูุ ุฃูู ุชูุน ูุฑุญูุฉ "ุชุฐูุฑ ุณุงูู ููุตูุญุฉ ุฃูู"ุ</p>
                    <div class="grid grid-cols-2 gap-4">
                        <button onclick="checkAnswer(this, false, 4)" class="quiz-option bg-white hover:bg-orange-100 p-4 rounded-lg transition-colors border">ูู ุงูุจุฏุงูุฉ ุงููุงุฏุฆุฉ</button>
                        <button onclick="checkAnswer(this, false, 4)" class="quiz-option bg-white hover:bg-orange-100 p-4 rounded-lg transition-colors border">ูู ุงูุฐุฑูุฉ</button>
                        <button onclick="checkAnswer(this, true, 4)" class="quiz-option bg-white hover:bg-orange-100 p-4 rounded-lg transition-colors border">ูู ุงูุจุญุซ ุนู ุงูุญู</button>
                        <button onclick="checkAnswer(this, false, 4)" class="quiz-option bg-white hover:bg-orange-100 p-4 rounded-lg transition-colors border">ูู ุงูููุงูุฉ ุงููุงุฏุฆุฉ</button>
                    </div>
                </div>

                <!-- Question 5: Concept -->
                <div class="quiz-question mb-6 p-6 bg-red-50 rounded-lg">
                    <h3 class="text-lg font-bold mb-4 text-red-700">ุงูุณุคุงู ุงูุฎุงูุณ: ุงูููููู ๐</h3>
                    <p class="text-lg mb-4 font-semibold">ูุง ุงููุฏู ูู ุงุณุชุฎุฏุงู ุงููุฑู ุงูุณุฑุฏูุ</p>
                    <div class="grid grid-cols-1 gap-3">
                        <button onclick="checkAnswer(this, false, 5)" class="quiz-option bg-white hover:bg-red-100 p-4 rounded-lg transition-colors border text-right">ูุฌุนู ุงููุตุฉ ุฃุทูู</button>
                        <button onclick="checkAnswer(this, true, 5)" class="quiz-option bg-white hover:bg-red-100 p-4 rounded-lg transition-colors border text-right">ูุชูุธูู ุงูุฃุญุฏุงุซ ูุฌุนู ุงููุตุฉ ุฃูุซุฑ ุชุดูููุงู</button>
                        <button onclick="checkAnswer(this, false, 5)" class="quiz-option bg-white hover:bg-red-100 p-4 rounded-lg transition-colors border text-right">ูุฅุถุงูุฉ ุดุฎุตูุงุช ุฃูุซุฑ</button>
                        <button onclick="checkAnswer(this, false, 5)" class="quiz-option bg-white hover:bg-red-100 p-4 rounded-lg transition-colors border text-right">ูุชุบููุฑ ููุงู ุงููุตุฉ</button>
                    </div>
                </div>

                <!-- Results Display -->
                <div id="quiz-results" class="hidden mt-6 p-6 bg-gradient-to-r from-green-100 to-blue-100 rounded-lg text-center">
                    <h3 class="text-2xl font-bold mb-4">๐ ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑ</h3>
                    <p id="score-display" class="text-xl mb-4"></p>
                    <button onclick="resetQuiz()" class="bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-3 rounded-full font-bold hover:from-blue-600 hover:to-purple-600 transition-all duration-300">
                        ๐ ุฅุนุงุฏุฉ ุงูุงุฎุชุจุงุฑ
                    </button>
                </div>
            </div>
        </div>

        <!-- Practical Training Section -->
        <div class="bg-white rounded-xl shadow-lg p-8 mb-8">
            <h2 class="text-2xl font-bold text-center mb-6 text-gray-800">๐จ ุชุฏุฑูุจ ุชุทุจููู - ุญูู ุงููุตุฉ</h2>
            
            <div class="bg-gradient-to-r from-purple-50 to-pink-50 p-6 rounded-lg mb-6">
                <h3 class="text-xl font-bold text-purple-700 mb-4">๐ ูุตุฉ "ููุฑุง ูุงููุฑุงุดุฉ ุงูุฐูุจูุฉ"</h3>
                <div class="story-text bg-white p-6 rounded-lg shadow-sm">
                    <p class="text-lg leading-relaxed text-gray-800 mb-4">
                        ูู <span id="time-element" class="cursor-pointer hover:bg-yellow-200 transition-colors p-1 rounded">ุตุจุงุญ ููู ุงูุฌูุนุฉ ุงููุดุฑู</span>ุ ูุงูุช <span id="character-element" class="cursor-pointer hover:bg-yellow-200 transition-colors p-1 rounded">ููุฑุง ุงููุชุงุฉ ุงูุตุบูุฑุฉ ุงููุญุจุฉ ููุทุจูุนุฉ</span> ุชูุนุจ ูู <span id="place-element" class="cursor-pointer hover:bg-yellow-200 transition-colors p-1 rounded">ุญุฏููุฉ ุฌุฏุชูุง ุงููุงุณุนุฉ</span>.
                    </p>
                    <p class="text-lg leading-relaxed text-gray-800 mb-4">
                        ูุฌุฃุฉุ <span id="problem-start" class="cursor-pointer hover:bg-yellow-200 transition-colors p-1 rounded">ุฑุฃุช ูุฑุงุดุฉ ุฐูุจูุฉ ุฌูููุฉ ุนุงููุฉ ูู ุดุจูุฉ ุนููุจูุช</span>. ุญุงููุช ููุฑุง ุฅููุงุฐูุงุ ููู <span id="problem-peak" class="cursor-pointer hover:bg-yellow-200 transition-colors p-1 rounded">ุงูุดุจูุฉ ูุงูุช ุนุงููุฉ ุฌุฏุงู ููู ุชุณุชุทุน ุงููุตูู ุฅูููุง</span>. ุดุนุฑุช ุจุงูุญุฒู ุงูุดุฏูุฏ ููู ุชุฑู ุงููุฑุงุดุฉ ุชูุงูุญ.
                    </p>
                    <p class="text-lg leading-relaxed text-gray-800">
                        <span id="solution-element" class="cursor-pointer hover:bg-yellow-200 transition-colors p-1 rounded">ุชุฐูุฑุช ููุฑุง ุฃู ุฌุฏูุง ุนูููุง ุงุณุชุฎุฏุงู ุงูุนุตุง ุงูุทูููุฉ ููุทู ุงูุซูุงุฑ</span>. ุฃุญุถุฑุช ุงูุนุตุง ุจุญุฐุฑ ู<span id="ending-element" class="cursor-pointer hover:bg-yellow-200 transition-colors p-1 rounded">ุญุฑุฑุช ุงููุฑุงุดุฉ ุจูุฌุงุญ. ุทุงุฑุช ุงููุฑุงุดุฉ ุญูููุง ูุฃููุง ุชุดูุฑูุงุ ูุชุนููุช ููุฑุง ุฃู ุงูุตุจุฑ ูุงูุชูููุฑ ูุญูุงู ุฃู ูุดููุฉ</span>.
                    </p>
                </div>
            </div>

            <!-- Interactive Analysis -->
            <div class="grid md:grid-cols-2 gap-6 mb-6">
                <!-- Element Identification -->
                <div class="bg-blue-50 p-6 rounded-lg">
                    <h4 class="text-lg font-bold text-blue-700 mb-4">๐ ุญุฏุฏ ุงูุนูุงุตุฑ</h4>
                    <div class="space-y-3">
                        <div class="flex items-center justify-between bg-white p-3 rounded-lg">
                            <span>ุงูุดุฎุตูุฉ ุงูุฑุฆูุณูุฉ:</span>
                            <button onclick="highlightElement('character-element')" class="bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600">ุฅุธูุงุฑ</button>
                        </div>
                        <div class="flex items-center justify-between bg-white p-3 rounded-lg">
                            <span>ุงูุฒูุงู:</span>
                            <button onclick="highlightElement('time-element')" class="bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600">ุฅุธูุงุฑ</button>
                        </div>
                        <div class="flex items-center justify-between bg-white p-3 rounded-lg">
                            <span>ุงูููุงู:</span>
                            <button onclick="highlightElement('place-element')" class="bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600">ุฅุธูุงุฑ</button>
                        </div>
                    </div>
                </div>

                <!-- Plot Analysis -->
                <div class="bg-green-50 p-6 rounded-lg">
                    <h4 class="text-lg font-bold text-green-700 mb-4">๐ ุชุญููู ุงูุญุจูุฉ</h4>
                    <div class="space-y-3">
                        <div class="flex items-center justify-between bg-white p-3 rounded-lg">
                            <span>ุจุฏุงูุฉ ุงููุดููุฉ:</span>
                            <button onclick="highlightElement('problem-start')" class="bg-green-500 text-white px-3 py-1 rounded text-sm hover:bg-green-600">ุฅุธูุงุฑ</button>
                        </div>
                        <div class="flex items-center justify-between bg-white p-3 rounded-lg">
                            <span>ุงูุฐุฑูุฉ:</span>
                            <button onclick="highlightElement('problem-peak')" class="bg-green-500 text-white px-3 py-1 rounded text-sm hover:bg-green-600">ุฅุธูุงุฑ</button>
                        </div>
                        <div class="flex items-center justify-between bg-white p-3 rounded-lg">
                            <span>ุงูุญู:</span>
                            <button onclick="highlightElement('solution-element')" class="bg-green-500 text-white px-3 py-1 rounded text-sm hover:bg-green-600">ุฅุธูุงุฑ</button>
                        </div>
                        <div class="flex items-center justify-between bg-white p-3 rounded-lg">
                            <span>ุงูููุงูุฉ:</span>
                            <button onclick="highlightElement('ending-element')" class="bg-green-500 text-white px-3 py-1 rounded text-sm hover:bg-green-600">ุฅุธูุงุฑ</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Drag and Drop Activity -->
            <div class="bg-yellow-50 p-6 rounded-lg mb-6">
                <h4 class="text-lg font-bold text-yellow-700 mb-4">๐ฏ ุฑุชุจ ุงูุฃุญุฏุงุซ ุญุณุจ ุงููุฑู ุงูุณุฑุฏู</h4>
                <div class="grid md:grid-cols-2 gap-6">
                    <!-- Events to drag -->
                    <div>
                        <h5 class="font-semibold mb-3 text-gray-700">ุงูุฃุญุฏุงุซ (ุงุณุญุจ ูุฃููุช):</h5>
                        <div id="events-container" class="space-y-2">
                            <div class="event-item bg-white p-3 rounded-lg shadow cursor-move border-2 border-dashed border-gray-300 hover:border-blue-400 transition-colors" draggable="true" data-order="4">
                                ููุฑุง ุชุญุฑุฑ ุงููุฑุงุดุฉ ูุชุชุนูู ุฏุฑุณุงู
                            </div>
                            <div class="event-item bg-white p-3 rounded-lg shadow cursor-move border-2 border-dashed border-gray-300 hover:border-blue-400 transition-colors" draggable="true" data-order="1">
                                ููุฑุง ุชูุนุจ ูู ุญุฏููุฉ ุฌุฏุชูุง
                            </div>
                            <div class="event-item bg-white p-3 rounded-lg shadow cursor-move border-2 border-dashed border-gray-300 hover:border-blue-400 transition-colors" draggable="true" data-order="3">
                                ููุฑุง ุชุชุฐูุฑ ูุตูุญุฉ ุฌุฏูุง
                            </div>
                            <div class="event-item bg-white p-3 rounded-lg shadow cursor-move border-2 border-dashed border-gray-300 hover:border-blue-400 transition-colors" draggable="true" data-order="2">
                                ุงููุฑุงุดุฉ ุนุงููุฉ ูุงูุดุจูุฉ ุนุงููุฉ ุฌุฏุงู
                            </div>
                        </div>
                    </div>

                    <!-- Drop zones -->
                    <div>
                        <h5 class="font-semibold mb-3 text-gray-700">ุงูุชุฑุชูุจ ุงูุตุญูุญ:</h5>
                        <div class="space-y-2">
                            <div class="drop-zone bg-emerald-100 p-4 rounded-lg border-2 border-dashed border-emerald-400 min-h-[60px] flex items-center justify-center text-emerald-700" data-position="1">
                                <span class="text-sm">1. ุงูุจุฏุงูุฉ ุงููุงุฏุฆุฉ</span>
                            </div>
                            <div class="drop-zone bg-red-100 p-4 rounded-lg border-2 border-dashed border-red-400 min-h-[60px] flex items-center justify-center text-red-700" data-position="2">
                                <span class="text-sm">2. ุงูุฐุฑูุฉ - ุงููุดููุฉ</span>
                            </div>
                            <div class="drop-zone bg-amber-100 p-4 rounded-lg border-2 border-dashed border-amber-400 min-h-[60px] flex items-center justify-center text-amber-700" data-position="3">
                                <span class="text-sm">3. ุงูุจุญุซ ุนู ุงูุญู</span>
                            </div>
                            <div class="drop-zone bg-emerald-100 p-4 rounded-lg border-2 border-dashed border-emerald-400 min-h-[60px] flex items-center justify-center text-emerald-700" data-position="4">
                                <span class="text-sm">4. ุงูููุงูุฉ ุงูุณุนูุฏุฉ</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="text-center mt-4">
                    <button onclick="checkOrder()" class="bg-gradient-to-r from-yellow-500 to-orange-500 text-white px-6 py-3 rounded-full font-bold hover:from-yellow-600 hover:to-orange-600 transition-all duration-300 transform hover:scale-105">
                        โ ุชุญูู ูู ุงูุชุฑุชูุจ
                    </button>
                    <button onclick="resetOrder()" class="bg-gray-500 text-white px-6 py-3 rounded-full font-bold hover:bg-gray-600 transition-all duration-300 transform hover:scale-105 mr-3">
                        ๐ ุฅุนุงุฏุฉ ุชุนููู
                    </button>
                </div>
                
                <div id="order-result" class="hidden mt-4 p-4 rounded-lg text-center"></div>
            </div>

            <!-- Creative Writing Exercise -->
            <div class="bg-purple-50 p-6 rounded-lg">
                <h4 class="text-lg font-bold text-purple-700 mb-4">โ๏ธ ุชุฏุฑูุจ ุงููุชุงุจุฉ ุงูุฅุจุฏุงุนูุฉ</h4>
                <p class="text-gray-700 mb-4">ุงูุชุจ ูุตุฉ ูุตูุฑุฉ ุจุงุณุชุฎุฏุงู ุงูุนูุงุตุฑ ุงูุชุงููุฉ:</p>
                
                <div class="grid md:grid-cols-3 gap-4 mb-4">
                    <div class="bg-white p-3 rounded-lg text-center">
                        <div class="text-2xl mb-2">๐ฆ</div>
                        <strong>ุงูุดุฎุตูุฉ:</strong> ุฃุญูุฏ ุงูุทุงูุจ
                    </div>
                    <div class="bg-white p-3 rounded-lg text-center">
                        <div class="text-2xl mb-2">๐ซ</div>
                        <strong>ุงูููุงู:</strong> ุงููุฏุฑุณุฉ
                    </div>
                    <div class="bg-white p-3 rounded-lg text-center">
                        <div class="text-2xl mb-2">๐</div>
                        <strong>ุงููุดููุฉ:</strong> ูุณูุงู ุงููุชุงุจ
                    </div>
                </div>
                
                <textarea id="creative-writing" class="w-full h-32 p-4 border-2 border-purple-300 rounded-lg focus:border-purple-500 focus:outline-none" placeholder="ุงูุชุจ ูุตุชู ููุง... ุชุฐูุฑ ุฃู ุชุชุถูู: ุงูุจุฏุงูุฉุ ุงูุชุญูู (ุงููุดููุฉ)ุ ูุงูููุงูุฉ"></textarea>
                
                <div class="text-center mt-4">
                    <button onclick="analyzeStory()" class="bg-gradient-to-r from-purple-500 to-pink-500 text-white px-6 py-3 rounded-full font-bold hover:from-purple-600 hover:to-pink-600 transition-all duration-300 transform hover:scale-105">
                        ๐ ุญูู ูุตุชู
                    </button>
                </div>
                
                <div id="story-analysis" class="hidden mt-4 p-4 bg-white rounded-lg"></div>
            </div>
        </div>
    </div>

    <script>
        const narrativeElements = {
            beginning: {
                title: "๐ ุงูุจุฏุงูุฉ",
                color: "emerald",
                content: `
                    <h3 class="text-2xl font-bold text-emerald-600 mb-4">ุงูุจุฏุงูุฉ ูู ุงููุต ุงูุณุฑุฏู</h3>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="text-lg font-semibold mb-3 text-gray-800">ูููุฒุงุช ุงูุจุฏุงูุฉ:</h4>
                            <ul class="space-y-2 text-gray-700">
                                <li class="flex items-center"><span class="text-2xl ml-2">๐ฅ</span> ุชูุฏูู ุงูุดุฎุตูุงุช ุงูุฑุฆูุณูุฉ</li>
                                <li class="flex items-center"><span class="text-2xl ml-2">๐๏ธ</span> ูุตู ุงูููุงู ูุงูุฒูุงู</li>
                                <li class="flex items-center"><span class="text-2xl ml-2">๐ฏ</span> ุชุญุฏูุฏ ุงููุฏู ุฃู ุงูุฑุบุจุฉ</li>
                                <li class="flex items-center"><span class="text-2xl ml-2">๐</span> ุฌุฐุจ ุงูุชุจุงู ุงููุงุฑุฆ</li>
                            </ul>
                        </div>
                        <div class="bg-emerald-50 p-4 rounded-lg">
                            <h4 class="font-semibold mb-2 text-emerald-700">ูู ูุตุชูุง:</h4>
                            <p class="text-gray-700">"ูู ููู ูุดูุณ ูู ุฃูุงู ุงูุฑุจูุนุ ูุงู ููุงู ุฃุฑูุจ ุตุบูุฑ ุฐูู ููุฏุนู ุณุงูู ูุนูุด ูู ุบุงุจุฉ ุฌูููุฉ"</p>
                        </div>
                    </div>
                `
            },
            transformation: {
                title: "๐ ุงูุชุญูู",
                color: "amber",
                content: `
                    <h3 class="text-2xl font-bold text-amber-600 mb-4">ุงูุชุญูู ูู ุงููุต ุงูุณุฑุฏู</h3>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="text-lg font-semibold mb-3 text-gray-800">ูููุฒุงุช ุงูุชุญูู:</h4>
                            <ul class="space-y-2 text-gray-700">
                                <li class="flex items-center"><span class="text-2xl ml-2">โก</span> ุธููุฑ ุงููุดููุฉ ุฃู ุงูุตุฑุงุน</li>
                                <li class="flex items-center"><span class="text-2xl ml-2">๐ญ</span> ุชุทูุฑ ุงูุฃุญุฏุงุซ ูุงูุชุดููู</li>
                                <li class="flex items-center"><span class="text-2xl ml-2">๐ญ</span> ุงุชุฎุงุฐ ุงููุฑุงุฑุงุช ุงููููุฉ</li>
                                <li class="flex items-center"><span class="text-2xl ml-2">๐ฅ</span> ุฐุฑูุฉ ุงูุฅุซุงุฑุฉ ูุงูุชูุชุฑ</li>
                            </ul>
                        </div>
                        <div class="bg-amber-50 p-4 rounded-lg">
                            <h4 class="font-semibold mb-2 text-amber-700">ูู ูุตุชูุง:</h4>
                            <p class="text-gray-700">"ุฎุฑุฌ ุณุงูู ููุจุญุซ ุนู ุงูุฌุฒุฑ ุงููุฐูุฐุ ููููู ุถู ุงูุทุฑูู. ุจุฏุฃ ูุจูู ุฎููุงูุ ุซู ุชุฐูุฑ ูุตูุญุฉ ุฃูู"</p>
                        </div>
                    </div>
                `
            },
            ending: {
                title: "๐ฏ ุงูููุงูุฉ",
                color: "rose",
                content: `
                    <h3 class="text-2xl font-bold text-rose-600 mb-4">ุงูููุงูุฉ ูู ุงููุต ุงูุณุฑุฏู</h3>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="text-lg font-semibold mb-3 text-gray-800">ูููุฒุงุช ุงูููุงูุฉ:</h4>
                            <ul class="space-y-2 text-gray-700">
                                <li class="flex items-center"><span class="text-2xl ml-2">โ</span> ุญู ุงููุดููุฉ ุงูุฑุฆูุณูุฉ</li>
                                <li class="flex items-center"><span class="text-2xl ml-2">๐</span> ุชุนูู ุฏุฑุณ ุฃู ุญููุฉ</li>
                                <li class="flex items-center"><span class="text-2xl ml-2">๐</span> ุงูุดุนูุฑ ุจุงูุฑุถุง ูุงูุงูุชูุงู</li>
                                <li class="flex items-center"><span class="text-2xl ml-2">๐</span> ุฅููุงุก ุงููุตุฉ ุจูุถูุญ</li>
                            </ul>
                        </div>
                        <div class="bg-rose-50 p-4 rounded-lg">
                            <h4 class="font-semibold mb-2 text-rose-700">ูู ูุตุชูุง:</h4>
                            <p class="text-gray-700">"ูุนู ุณุงูู ุฐูู ููุฌุฏ ุทุฑููู ุฅูู ุงูุจูุช ุจุฃูุงูุ ูุชุนูู ุฃู ุงูุฐูุงุก ูุงููุฏูุก ูุญูุงู ุฃู ูุดููุฉ"</p>
                        </div>
                    </div>
                `
            }
        };

        const elements = {
            characters: {
                title: "๐ฅ ุงูุดุฎุตูุงุช",
                color: "red",
                content: `
                    <h3 class="text-2xl font-bold text-red-600 mb-4">ุงูุดุฎุตูุงุช ูู ุงููุต ุงูุณุฑุฏู</h3>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="text-lg font-semibold mb-3 text-gray-800">ุฃููุงุน ุงูุดุฎุตูุงุช:</h4>
                            <ul class="space-y-2 text-gray-700">
                                <li class="flex items-center"><span class="text-2xl ml-2">โญ</span> ุงูุดุฎุตูุฉ ุงูุฑุฆูุณูุฉ: ุงูุจุทู ุงูุฃุณุงุณู</li>
                                <li class="flex items-center"><span class="text-2xl ml-2">๐ค</span> ุงูุดุฎุตูุงุช ุงูุซุงูููุฉ: ุชุณุงุนุฏ ูู ุงูุฃุญุฏุงุซ</li>
                                <li class="flex items-center"><span class="text-2xl ml-2">๐</span> ุงูุดุฎุตูุฉ ุงููุนุงุฑุถุฉ: ุชุฎูู ุงููุดุงูู</li>
                            </ul>
                        </div>
                        <div class="bg-red-50 p-4 rounded-lg">
                            <h4 class="font-semibold mb-2 text-red-700">ูู ูุตุชูุง:</h4>
                            <p class="text-gray-700">ุณุงูู ุงูุฃุฑูุจ ูู ุงูุดุฎุตูุฉ ุงูุฑุฆูุณูุฉุ ูุฃูู ุดุฎุตูุฉ ุซุงูููุฉ ูููุฉ</p>
                        </div>
                    </div>
                `
            },
            events: {
                title: "โก ุงูุฃุญุฏุงุซ",
                color: "green",
                content: `
                    <h3 class="text-2xl font-bold text-green-600 mb-4">ุงูุฃุญุฏุงุซ ูู ุงููุต ุงูุณุฑุฏู</h3>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="text-lg font-semibold mb-3 text-gray-800">ุชุฑุชูุจ ุงูุฃุญุฏุงุซ:</h4>
                            <div class="space-y-3">
                                <div class="flex items-center bg-green-50 p-3 rounded-lg">
                                    <span class="bg-green-500 text-white rounded-full w-8 h-8 flex items-center justify-center ml-3 font-bold">1</span>
                                    <span>ุงูุจุฏุงูุฉ: ุชูุฏูู ุงูุดุฎุตูุงุช ูุงูููุงู</span>
                                </div>
                                <div class="flex items-center bg-green-50 p-3 rounded-lg">
                                    <span class="bg-green-500 text-white rounded-full w-8 h-8 flex items-center justify-center ml-3 font-bold">2</span>
                                    <span>ุงููุณุท: ุงููุดููุฉ ุฃู ุงูุชุญุฏู</span>
                                </div>
                                <div class="flex items-center bg-green-50 p-3 rounded-lg">
                                    <span class="bg-green-500 text-white rounded-full w-8 h-8 flex items-center justify-center ml-3 font-bold">3</span>
                                    <span>ุงูููุงูุฉ: ุญู ุงููุดููุฉ</span>
                                </div>
                            </div>
                        </div>
                        <div class="bg-green-50 p-4 rounded-lg">
                            <h4 class="font-semibold mb-2 text-green-700">ูู ูุตุชูุง:</h4>
                            <p class="text-gray-700">ุฎุฑูุฌ ุณุงูู ููุจุญุซ ุนู ุงูุฌุฒุฑุ ุถูุงุนูุ ุซู ุนูุฏุชู ุจุฐูุงุก</p>
                        </div>
                    </div>
                `
            },
            time: {
                title: "๐ ุงูุฒูุงู",
                color: "blue",
                content: `
                    <h3 class="text-2xl font-bold text-blue-600 mb-4">ุงูุฒูุงู ูู ุงููุต ุงูุณุฑุฏู</h3>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="text-lg font-semibold mb-3 text-gray-800">ุฃููุงุน ุงูุฒูุงู:</h4>
                            <ul class="space-y-2 text-gray-700">
                                <li class="flex items-center"><span class="text-2xl ml-2">๐</span> ุฒูุงู ูุญุฏุฏ: ุตุจุงุญุ ูุณุงุกุ ููู ูุนูู</li>
                                <li class="flex items-center"><span class="text-2xl ml-2">๐</span> ูุชุฑุฉ ุฒูููุฉ: ุงูุฑุจูุนุ ุงูุตููุ ุงูุดุชุงุก</li>
                                <li class="flex items-center"><span class="text-2xl ml-2">โฐ</span> ุฒูุงู ุนุงู: ูุฏููุงูุ ุญุฏูุซุงู</li>
                            </ul>
                        </div>
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <h4 class="font-semibold mb-2 text-blue-700">ูู ูุตุชูุง:</h4>
                            <p class="text-gray-700">"ููู ูุดูุณ ูู ุฃูุงู ุงูุฑุจูุน" - ุฒูุงู ูุญุฏุฏ ูุฌููู</p>
                        </div>
                    </div>
                `
            },
            place: {
                title: "๐๏ธ ุงูููุงู",
                color: "purple",
                content: `
                    <h3 class="text-2xl font-bold text-purple-600 mb-4">ุงูููุงู ูู ุงููุต ุงูุณุฑุฏู</h3>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="text-lg font-semibold mb-3 text-gray-800">ุฃูููุฉ ุงูููุงู:</h4>
                            <ul class="space-y-2 text-gray-700">
                                <li class="flex items-center"><span class="text-2xl ml-2">๐ญ</span> ูุคุซุฑ ุนูู ุงูุฃุญุฏุงุซ</li>
                                <li class="flex items-center"><span class="text-2xl ml-2">๐จ</span> ูุฎูู ุงูุฌู ุงูุนุงู ูููุตุฉ</li>
                                <li class="flex items-center"><span class="text-2xl ml-2">๐บ๏ธ</span> ูุณุงุนุฏ ุงููุงุฑุฆ ุนูู ุงูุชุฎูู</li>
                            </ul>
                        </div>
                        <div class="bg-purple-50 p-4 rounded-lg">
                            <h4 class="font-semibold mb-2 text-purple-700">ูู ูุตุชูุง:</h4>
                            <p class="text-gray-700">"ุบุงุจุฉ ุฌูููุฉ ูููุฆุฉ ุจุงูุฃุดุฌุงุฑ ูุงูุฒููุฑ" - ููุงู ุทุจูุนู ุฌููู</p>
                        </div>
                    </div>
                `
            },
            narrator: {
                title: "๐ฃ๏ธ ุงูุฑุงูู",
                color: "orange",
                content: `
                    <h3 class="text-2xl font-bold text-orange-600 mb-4">ุงูุฑุงูู ูู ุงููุต ุงูุณุฑุฏู</h3>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="text-lg font-semibold mb-3 text-gray-800">ุฃููุงุน ุงูุฑุงูู:</h4>
                            <ul class="space-y-2 text-gray-700">
                                <li class="flex items-center"><span class="text-2xl ml-2">๐๏ธ</span> ุฑุงูู ุนููู: ูุนุฑู ูู ุดูุก</li>
                                <li class="flex items-center"><span class="text-2xl ml-2">๐ค</span> ุฑุงูู ูุดุงุฑู: ุฌุฒุก ูู ุงููุตุฉ</li>
                                <li class="flex items-center"><span class="text-2xl ml-2">๐</span> ุฑุงูู ูุญุงูุฏ: ูุญูู ููุท</li>
                            </ul>
                        </div>
                        <div class="bg-orange-50 p-4 rounded-lg">
                            <h4 class="font-semibold mb-2 text-orange-700">ูู ูุตุชูุง:</h4>
                            <p class="text-gray-700">ุงูุฑุงูู ุนููู - ูุนุฑู ูุดุงุนุฑ ุณุงูู ูุฃููุงุฑู</p>
                        </div>
                    </div>
                `
            },
            plot: {
                title: "๐งฉ ุงูุญุจูุฉ",
                color: "pink",
                content: `
                    <h3 class="text-2xl font-bold text-pink-600 mb-4">ุงูุญุจูุฉ ูู ุงููุต ุงูุณุฑุฏู</h3>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="text-lg font-semibold mb-3 text-gray-800">ุนูุงุตุฑ ุงูุญุจูุฉ:</h4>
                            <div class="space-y-3">
                                <div class="bg-pink-50 p-3 rounded-lg">
                                    <span class="font-semibold text-pink-700">ุงูุนูุฏุฉ:</span> ุงููุดููุฉ ุงูุฑุฆูุณูุฉ
                                </div>
                                <div class="bg-pink-50 p-3 rounded-lg">
                                    <span class="font-semibold text-pink-700">ุงูุตุฑุงุน:</span> ูุญุงููุฉ ุญู ุงููุดููุฉ
                                </div>
                                <div class="bg-pink-50 p-3 rounded-lg">
                                    <span class="font-semibold text-pink-700">ุงูุญู:</span> ุงูุชูุงุก ุงููุดููุฉ
                                </div>
                            </div>
                        </div>
                        <div class="bg-pink-50 p-4 rounded-lg">
                            <h4 class="font-semibold mb-2 text-pink-700">ูู ูุตุชูุง:</h4>
                            <p class="text-gray-700">ุงูุนูุฏุฉ: ุถูุงุน ุณุงููุ ุงูุญู: ุงุชุจุงุน ุฃุซุฑ ุงูุฃูุฏุงู</p>
                        </div>
                    </div>
                `
            }
        };

        function showNarrativeElement(elementKey) {
            const element = narrativeElements[elementKey];
            const explanationArea = document.getElementById('explanation-area');
            const explanationContent = document.getElementById('explanation-content');
            
            explanationContent.innerHTML = element.content;
            explanationArea.classList.remove('hidden');
            explanationArea.classList.add('fade-in');
            
            // Scroll to explanation
            explanationArea.scrollIntoView({ behavior: 'smooth' });
        }

        function showElement(elementKey) {
            const element = elements[elementKey];
            const explanationArea = document.getElementById('explanation-area');
            const explanationContent = document.getElementById('explanation-content');
            
            explanationContent.innerHTML = element.content;
            explanationArea.classList.remove('hidden');
            explanationArea.classList.add('fade-in');
            
            // Scroll to explanation
            explanationArea.scrollIntoView({ behavior: 'smooth' });
        }

        // Define colors for each story element
        const elementColors = {
            'element-time': '#60a5fa',      // Blue - ุงูุฒูุงู
            'element-character': '#a78bfa', // Purple - ุงูุดุฎุตูุฉ  
            'element-place': '#4ade80',     // Green - ุงูููุงู
            'element-goal': '#facc15',      // Yellow - ุงููุฏู
            'element-problem': '#fb923c',   // Orange - ุงููุดููุฉ
            'element-climax': '#f87171',    // Red - ุงูุฐุฑูุฉ
            'element-solution': '#2dd4bf',  // Teal - ุงูุญู
            'element-resolution': '#34d399', // Emerald - ุงูููุงูุฉ
            'element-lesson': '#10b981'     // Emerald - ุงูุฏุฑุณ ุงููุณุชูุงุฏ
        };

        // Define importance levels (1 = most important, 5 = least important)
        const elementImportance = {
            'element-climax': 1,      // ุงูุฐุฑูุฉ - ุฃูู ุนูุตุฑ
            'element-character': 2,   // ุงูุดุฎุตูุฉ
            'element-problem': 2,     // ุงููุดููุฉ
            'element-solution': 3,    // ุงูุญู
            'element-resolution': 3,  // ุงูููุงูุฉ
            'element-place': 4,       // ุงูููุงู
            'element-time': 4,        // ุงูุฒูุงู
            'element-goal': 5,        // ุงููุฏู
            'element-lesson': 5       // ุงูุฏุฑุณ ุงููุณุชูุงุฏ
        };

        function highlightAllElements() {
            Object.keys(elementColors).forEach((className, index) => {
                const elements = document.querySelectorAll(`.${className}`);
                elements.forEach(element => {
                    setTimeout(() => {
                        element.style.backgroundColor = elementColors[className];
                        element.style.color = 'white';
                        element.style.fontWeight = 'bold';
                        element.style.transform = 'scale(1.05)';
                        element.style.boxShadow = '0 2px 8px rgba(0,0,0,0.2)';
                    }, index * 150);
                });
            });
        }

        function highlightByImportance() {
            // Reset first
            resetHighlights();
            
            // Group elements by importance level
            const importanceLevels = {};
            Object.keys(elementImportance).forEach(className => {
                const level = elementImportance[className];
                if (!importanceLevels[level]) importanceLevels[level] = [];
                importanceLevels[level].push(className);
            });

            // Highlight by importance level with different intensities
            Object.keys(importanceLevels).forEach(level => {
                const delay = (level - 1) * 800; // More important elements appear first
                const intensity = 6 - level; // Higher intensity for more important elements
                
                setTimeout(() => {
                    importanceLevels[level].forEach(className => {
                        const elements = document.querySelectorAll(`.${className}`);
                        elements.forEach(element => {
                            element.style.backgroundColor = elementColors[className];
                            element.style.color = 'white';
                            element.style.fontWeight = 'bold';
                            element.style.transform = `scale(${1 + (intensity * 0.02)})`;
                            element.style.boxShadow = `0 ${intensity}px ${intensity * 2}px rgba(0,0,0,0.${intensity})`;
                            element.style.border = `${intensity}px solid rgba(255,255,255,0.5)`;
                            
                            // Add pulsing animation for most important elements
                            if (level <= 2) {
                                element.style.animation = 'pulse 1.5s ease-in-out infinite';
                            }
                            
                            // Add importance indicator
                            const indicator = document.createElement('span');
                            indicator.className = 'importance-indicator';
                            indicator.innerHTML = 'โ'.repeat(intensity);
                            indicator.style.cssText = `
                                position: absolute;
                                top: -10px;
                                right: -5px;
                                font-size: 12px;
                                color: #fbbf24;
                                text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
                                z-index: 10;
                            `;
                            
                            // Position relative for absolute positioning of indicator
                            element.style.position = 'relative';
                            element.appendChild(indicator);
                        });
                    });
                }, delay);
            });
        }

        function resetHighlights() {
            // Reset all story elements
            Object.keys(elementColors).forEach(className => {
                const elements = document.querySelectorAll(`.${className}`);
                elements.forEach(element => {
                    element.style.backgroundColor = '';
                    element.style.color = '';
                    element.style.fontWeight = '';
                    element.style.transform = '';
                    element.style.boxShadow = '';
                    element.style.border = '';
                    element.style.animation = '';
                    element.style.position = '';
                    
                    // Remove importance indicators
                    const indicators = element.querySelectorAll('.importance-indicator');
                    indicators.forEach(indicator => indicator.remove());
                });
            });
        }

        // Add click functionality to individual elements
        document.addEventListener('DOMContentLoaded', function() {
            Object.keys(elementColors).forEach(className => {
                const elements = document.querySelectorAll(`.${className}`);
                elements.forEach(element => {
                    element.addEventListener('click', function() {
                        // Reset all first
                        resetHighlights();
                        
                        // Highlight clicked element
                        this.style.backgroundColor = elementColors[className];
                        this.style.color = 'white';
                        this.style.fontWeight = 'bold';
                        this.style.transform = 'scale(1.1)';
                        this.style.boxShadow = '0 4px 12px rgba(0,0,0,0.3)';
                        this.style.border = '2px solid rgba(255,255,255,0.8)';
                        
                        // Show element info
                        showElementInfo(className, this.textContent);
                    });
                });
            });
        });

        function showElementInfo(className, text) {
            const elementNames = {
                'element-time': 'ุงูุฒูุงู',
                'element-character': 'ุงูุดุฎุตูุฉ ุงูุฑุฆูุณูุฉ',
                'element-place': 'ุงูููุงู',
                'element-goal': 'ุงููุฏู',
                'element-problem': 'ุงููุดููุฉ',
                'element-climax': 'ุงูุฐุฑูุฉ',
                'element-solution': 'ุงูุญู',
                'element-resolution': 'ุงูููุงูุฉ',
                'element-lesson': 'ุงูุฏุฑุณ ุงููุณุชูุงุฏ'
            };

            const elementDescriptions = {
                'element-time': 'ูุญุฏุฏ ูุชู ููุนุช ุฃุญุฏุงุซ ุงููุตุฉ',
                'element-character': 'ุงูุดุฎุต ุงูุฑุฆูุณู ุงูุฐู ุชุฏูุฑ ุญููู ุงููุตุฉ',
                'element-place': 'ุงูููุงู ุงูุฐู ุชุญุฏุซ ููู ุงููุตุฉ',
                'element-goal': 'ูุง ูุฑูุฏ ุงูุจุทู ุชุญูููู',
                'element-problem': 'ุงููุดููุฉ ุงูุชู ุชูุงุฌู ุงูุจุทู',
                'element-climax': 'ุฃูู ูุญุธุฉ ูู ุงููุตุฉ - ุฐุฑูุฉ ุงูุชูุชุฑ',
                'element-solution': 'ููู ููุฑ ุงูุจุทู ูู ุญู ุงููุดููุฉ',
                'element-resolution': 'ุงููุชูุฌุฉ ุงูููุงุฆูุฉ ูููุตุฉ',
                'element-lesson': 'ุงูุญููุฉ ุฃู ุงูุฏุฑุณ ุงููุณุชูุงุฏ ูู ุงููุตุฉ'
            };

            // Create or update info box
            let infoBox = document.getElementById('element-info-box');
            if (!infoBox) {
                infoBox = document.createElement('div');
                infoBox.id = 'element-info-box';
                infoBox.className = 'fixed bottom-4 right-4 bg-white p-4 rounded-lg shadow-lg border-2 z-50 max-w-sm';
                document.body.appendChild(infoBox);
            }

            infoBox.innerHTML = `
                <div class="flex items-center justify-between mb-2">
                    <h4 class="font-bold text-lg" style="color: ${elementColors[className]}">${elementNames[className]}</h4>
                    <button onclick="document.getElementById('element-info-box').remove()" class="text-gray-500 hover:text-gray-700">โ</button>
                </div>
                <p class="text-sm text-gray-600 mb-2">${elementDescriptions[className]}</p>
                <div class="bg-gray-50 p-2 rounded text-sm">
                    <strong>ุงููุต:</strong> "${text}"
                </div>
                <div class="mt-2 text-xs text-gray-500">
                    ูุณุชูู ุงูุฃูููุฉ: ${'โ'.repeat(6 - elementImportance[className])} (${6 - elementImportance[className]}/5)
                </div>
            `;

            // Auto-hide after 5 seconds
            setTimeout(() => {
                if (infoBox && infoBox.parentNode) {
                    infoBox.remove();
                }
            }, 5000);
        }

        let quizScore = 0;
        let answeredQuestions = new Set();

        function checkAnswer(button, isCorrect, questionNumber) {
            // Prevent multiple answers for the same question
            if (answeredQuestions.has(questionNumber)) {
                return;
            }
            
            answeredQuestions.add(questionNumber);
            
            // Find all options for this question
            const questionDiv = button.closest('.quiz-question');
            const options = questionDiv.querySelectorAll('.quiz-option');
            
            options.forEach(option => {
                option.disabled = true;
                if (option === button) {
                    if (isCorrect) {
                        option.classList.add('bg-green-500', 'text-white');
                        option.innerHTML += ' โ';
                        quizScore++;
                    } else {
                        option.classList.add('bg-red-500', 'text-white');
                        option.innerHTML += ' โ';
                    }
                } else if (option.onclick.toString().includes('true')) {
                    option.classList.add('bg-green-200');
                    option.innerHTML += ' โ';
                }
            });
            
            // Check if all questions are answered
            if (answeredQuestions.size === 5) {
                setTimeout(() => {
                    showQuizResults();
                }, 1000);
            }
        }

        function showQuizResults() {
            const resultsDiv = document.getElementById('quiz-results');
            const scoreDisplay = document.getElementById('score-display');
            
            let message = '';
            let emoji = '';
            
            if (quizScore === 5) {
                message = 'ููุชุงุฒ! ุญุตูุช ุนูู ุงูุฏุฑุฌุฉ ุงููุงููุฉ!';
                emoji = '๐';
            } else if (quizScore >= 4) {
                message = 'ุฌูุฏ ุฌุฏุงู! ุฃุฏุงุก ุฑุงุฆุน!';
                emoji = '๐';
            } else if (quizScore >= 3) {
                message = 'ุฌูุฏ! ููููู ุงููุฑุงุฌุนุฉ ูุงููุญุงููุฉ ูุฑุฉ ุฃุฎุฑู';
                emoji = '๐';
            } else {
                message = 'ุชุญุชุงุฌ ุฅูู ูุฑุงุฌุนุฉ ุงููุงุฏุฉ ุฃูุซุฑ';
                emoji = '๐';
            }
            
            scoreDisplay.innerHTML = `${emoji} ูุชูุฌุชู: ${quizScore}/5<br>${message}`;
            resultsDiv.classList.remove('hidden');
            resultsDiv.scrollIntoView({ behavior: 'smooth' });
        }

        function resetQuiz() {
            quizScore = 0;
            answeredQuestions.clear();
            
            // Reset all quiz options
            const options = document.querySelectorAll('.quiz-option');
            options.forEach(option => {
                option.disabled = false;
                option.className = 'quiz-option bg-white hover:bg-blue-100 p-4 rounded-lg transition-colors border';
                // Remove checkmarks and X marks
                option.innerHTML = option.innerHTML.replace(/ โ| โ/g, '');
                
                // Reset specific hover colors for different questions
                const questionDiv = option.closest('.quiz-question');
                if (questionDiv.classList.contains('bg-blue-50')) {
                    option.className = 'quiz-option bg-white hover:bg-blue-100 p-4 rounded-lg transition-colors border';
                } else if (questionDiv.classList.contains('bg-green-50')) {
                    option.className = 'quiz-option bg-white hover:bg-green-100 p-4 rounded-lg transition-colors border text-right';
                } else if (questionDiv.classList.contains('bg-purple-50')) {
                    option.className = 'quiz-option bg-white hover:bg-purple-100 p-4 rounded-lg transition-colors border';
                } else if (questionDiv.classList.contains('bg-orange-50')) {
                    option.className = 'quiz-option bg-white hover:bg-orange-100 p-4 rounded-lg transition-colors border';
                } else if (questionDiv.classList.contains('bg-red-50')) {
                    option.className = 'quiz-option bg-white hover:bg-red-100 p-4 rounded-lg transition-colors border text-right';
                }
            });
            
            // Hide results
            document.getElementById('quiz-results').classList.add('hidden');
        }

        function animatePlotLine() {
            const circles = document.querySelectorAll('circle');
            circles.forEach((circle, index) => {
                setTimeout(() => {
                    circle.style.animation = 'pulse 1s ease-in-out';
                    circle.style.transform = 'scale(1.2)';
                    setTimeout(() => {
                        circle.style.transform = 'scale(1)';
                    }, 1000);
                }, index * 500);
            });
        }

        function showPlotDetails() {
            const explanationArea = document.getElementById('explanation-area');
            const explanationContent = document.getElementById('explanation-content');
            
            explanationContent.innerHTML = `
                <h3 class="text-2xl font-bold text-blue-600 mb-4">๐ ุดุฑุญ ุชูุตููู ูููุฑู ุงูุณุฑุฏู</h3>
                <div class="space-y-6">
                    <div class="bg-emerald-50 p-4 rounded-lg border-r-4 border-emerald-500">
                        <h4 class="font-bold text-emerald-700 mb-2">๐ ุงูุจุฏุงูุฉ ุงููุงุฏุฆุฉ</h4>
                        <p class="text-gray-700">ุชูุฏูู ุณุงูู ุงูุฃุฑูุจ ูู ุจูุฆุชู ุงูุทุจูุนูุฉ ุงูุขููุฉ. ุงูุฌู ูุงุฏุฆ ููุฑูุญุ ูุงููุงุฑุฆ ูุชุนุฑู ุนูู ุงูุดุฎุตูุฉ ุงูุฑุฆูุณูุฉ.</p>
                    </div>
                    
                    <div class="bg-amber-50 p-4 rounded-lg border-r-4 border-amber-500">
                        <h4 class="font-bold text-amber-700 mb-2">โ๏ธ ุธููุฑ ุงููุดููุฉ</h4>
                        <p class="text-gray-700">ุณุงูู ููุฑุฑ ุงูุฎุฑูุฌ ููุจุญุซ ุนู ุงูุฌุฒุฑ. ููุง ุชุจุฏุฃ ุงููุดููุฉ ูู ุงูุธููุฑุ ูุงูุชูุชุฑ ูุฒุฏุงุฏ ููููุงู.</p>
                    </div>
                    
                    <div class="bg-orange-50 p-4 rounded-lg border-r-4 border-orange-500">
                        <h4 class="font-bold text-orange-700 mb-2">๐ ุชุตุงุนุฏ ุงูุชูุชุฑ</h4>
                        <p class="text-gray-700">ุณุงูู ูุถู ุงูุทุฑูู ููุจุฏุฃ ูู ุงูุดุนูุฑ ุจุงูููู. ุงูุชูุชุฑ ูุฒุฏุงุฏ ูุงููุงุฑุฆ ูุดุนุฑ ุจุงูููู ุนูู ุณุงูู.</p>
                    </div>
                    
                    <div class="bg-red-50 p-4 rounded-lg border-r-4 border-red-500">
                        <h4 class="font-bold text-red-700 mb-2">๐ฅ ุงูุฐุฑูุฉ - ุงูุชุญูู ุงูุฌุฐุฑู</h4>
                        <p class="text-gray-700">ุฃุนูู ููุทุฉ ูู ุงูุชูุชุฑ! ุณุงูู ูุดุนุฑ ุจุงูุฎูู ุงูุดุฏูุฏ ููุจูู. ูุฐู ูู ุงููุญุธุฉ ุงูุญุงุณูุฉ ูู ุงููุตุฉ.</p>
                    </div>
                    
                    <div class="bg-amber-50 p-4 rounded-lg border-r-4 border-amber-500">
                        <h4 class="font-bold text-amber-700 mb-2">๐ก ุงูุจุญุซ ุนู ุงูุญู</h4>
                        <p class="text-gray-700">ุณุงูู ูุชุฐูุฑ ูุตูุญุฉ ุฃูู. ุงูุชูุชุฑ ูุจุฏุฃ ูู ุงูุงูุฎูุงุถ ูุงูุฃูู ูุธูุฑ ูู ุงูุฃูู.</p>
                    </div>
                    
                    <div class="bg-lime-50 p-4 rounded-lg border-r-4 border-lime-500">
                        <h4 class="font-bold text-lime-700 mb-2">โ ุชุทุจูู ุงูุญู</h4>
                        <p class="text-gray-700">ุณุงูู ูุชุจุน ุฃุซุฑ ุฃูุฏุงูู ููุฌุฏ ุทุฑููู. ุงููุดููุฉ ุชูุญู ุชุฏุฑูุฌูุงู ูุงูุฑุงุญุฉ ุชุนูุฏ.</p>
                    </div>
                    
                    <div class="bg-emerald-50 p-4 rounded-lg border-r-4 border-emerald-500">
                        <h4 class="font-bold text-emerald-700 mb-2">๐ ุงูููุงูุฉ ุงููุงุฏุฆุฉ</h4>
                        <p class="text-gray-700">ุณุงูู ูุนูุฏ ุฅูู ุงูุจูุช ุจุฃูุงู ููุชุนูู ุฏุฑุณุงู ูููุงู. ุงููุฏูุก ูุงูุณูุงู ูุนูุฏุงู ูุฑุฉ ุฃุฎุฑู.</p>
                    </div>
                </div>
                
                <div class="mt-6 p-4 bg-blue-50 rounded-lg">
                    <h4 class="font-bold text-blue-700 mb-2">๐ฏ ุงููุฏู ูู ุงููุฑู ุงูุณุฑุฏู:</h4>
                    <ul class="list-disc list-inside text-gray-700 space-y-1">
                        <li>ูุณุงุนุฏ ูู ููู ุชุทูุฑ ุงูุฃุญุฏุงุซ ูู ุงููุตุฉ</li>
                        <li>ููุถุญ ููู ุชุชุตุงุนุฏ ุงููุดุงูู ูุชูุญู</li>
                        <li>ูุฌุนู ุงููุตุฉ ุฃูุซุฑ ุฅุซุงุฑุฉ ูุชุดูููุงู</li>
                        <li>ูุณุงุนุฏ ุงููุงุชุจ ูู ุชูุธูู ุฃููุงุฑู</li>
                    </ul>
                </div>
            `;
            
            explanationArea.classList.remove('hidden');
            explanationArea.classList.add('fade-in');
            explanationArea.scrollIntoView({ behavior: 'smooth' });
        }

        // Highlight specific elements in the training story
        function highlightElement(elementId) {
            // Reset all highlights
            const allElements = document.querySelectorAll('[id$="-element"], [id^="problem-"], [id^="solution-"], [id^="ending-"]');
            allElements.forEach(el => {
                el.style.backgroundColor = '';
                el.style.transform = '';
            });
            
            // Highlight the selected element
            const element = document.getElementById(elementId);
            if (element) {
                element.style.backgroundColor = '#fbbf24';
                element.style.transform = 'scale(1.05)';
                element.style.transition = 'all 0.3s ease';
                
                // Remove highlight after 3 seconds
                setTimeout(() => {
                    element.style.backgroundColor = '';
                    element.style.transform = '';
                }, 3000);
            }
        }

        // Drag and Drop functionality
        let draggedElement = null;

        document.addEventListener('DOMContentLoaded', function() {
            const eventItems = document.querySelectorAll('.event-item');
            const dropZones = document.querySelectorAll('.drop-zone');

            // Add drag event listeners
            eventItems.forEach(item => {
                item.addEventListener('dragstart', function(e) {
                    draggedElement = this;
                    this.style.opacity = '0.5';
                });

                item.addEventListener('dragend', function(e) {
                    this.style.opacity = '1';
                });
            });

            // Add drop event listeners
            dropZones.forEach(zone => {
                zone.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    this.style.backgroundColor = '#e5e7eb';
                });

                zone.addEventListener('dragleave', function(e) {
                    this.style.backgroundColor = '';
                });

                zone.addEventListener('drop', function(e) {
                    e.preventDefault();
                    this.style.backgroundColor = '';
                    
                    if (draggedElement) {
                        // Clear the zone first
                        const existingEvent = this.querySelector('.event-item');
                        if (existingEvent) {
                            document.getElementById('events-container').appendChild(existingEvent);
                        }
                        
                        // Add the dragged element
                        this.appendChild(draggedElement);
                        draggedElement = null;
                    }
                });
            });
        });

        function checkOrder() {
            const dropZones = document.querySelectorAll('.drop-zone');
            let correctCount = 0;
            let totalZones = 0;

            dropZones.forEach(zone => {
                const eventItem = zone.querySelector('.event-item');
                if (eventItem) {
                    totalZones++;
                    const expectedOrder = zone.getAttribute('data-position');
                    const actualOrder = eventItem.getAttribute('data-order');
                    
                    if (expectedOrder === actualOrder) {
                        correctCount++;
                        zone.style.borderColor = '#10b981';
                        zone.style.backgroundColor = '#d1fae5';
                    } else {
                        zone.style.borderColor = '#ef4444';
                        zone.style.backgroundColor = '#fee2e2';
                    }
                }
            });

            const resultDiv = document.getElementById('order-result');
            resultDiv.classList.remove('hidden');
            
            if (correctCount === 4 && totalZones === 4) {
                resultDiv.innerHTML = `
                    <div class="bg-green-100 text-green-800 p-4 rounded-lg">
                        <h4 class="font-bold text-lg mb-2">๐ ููุชุงุฒ!</h4>
                        <p>ุฑุชุจุช ุฌููุน ุงูุฃุญุฏุงุซ ุจุดูู ุตุญูุญ ุญุณุจ ุงููุฑู ุงูุณุฑุฏู!</p>
                    </div>
                `;
            } else {
                resultDiv.innerHTML = `
                    <div class="bg-yellow-100 text-yellow-800 p-4 rounded-lg">
                        <h4 class="font-bold text-lg mb-2">๐ค ุญุงูู ูุฑุฉ ุฃุฎุฑู</h4>
                        <p>ุฑุชุจุช ${correctCount} ูู ${totalZones} ุฃุญุฏุงุซ ุจุดูู ุตุญูุญ. ุฑุงุฌุน ุงููุฑู ุงูุณุฑุฏู ูุญุงูู ูุฑุฉ ุฃุฎุฑู!</p>
                    </div>
                `;
            }
        }

        function resetOrder() {
            // Move all events back to the container
            const eventItems = document.querySelectorAll('.event-item');
            const eventsContainer = document.getElementById('events-container');
            
            eventItems.forEach(item => {
                eventsContainer.appendChild(item);
            });

            // Reset drop zone styles
            const dropZones = document.querySelectorAll('.drop-zone');
            dropZones.forEach(zone => {
                zone.style.borderColor = '';
                zone.style.backgroundColor = '';
            });

            // Hide result
            document.getElementById('order-result').classList.add('hidden');
        }

        function analyzeStory() {
            const storyText = document.getElementById('creative-writing').value.trim();
            const analysisDiv = document.getElementById('story-analysis');
            
            if (!storyText) {
                analysisDiv.innerHTML = `
                    <div class="bg-red-100 text-red-800 p-4 rounded-lg">
                        <p>โ๏ธ ูุฑุฌู ูุชุงุจุฉ ูุตุฉ ุฃููุงู!</p>
                    </div>
                `;
                analysisDiv.classList.remove('hidden');
                return;
            }

            // Simple analysis based on keywords and structure
            let analysis = {
                hasBeginning: false,
                hasProblem: false,
                hasSolution: false,
                hasEnding: false,
                hasCharacter: false,
                hasPlace: false
            };

            const text = storyText.toLowerCase();
            
            // Check for story elements
            if (text.includes('ุฃุญูุฏ') || text.includes('ุงูุทุงูุจ')) analysis.hasCharacter = true;
            if (text.includes('ูุฏุฑุณุฉ') || text.includes('ูุตู') || text.includes('ุตู')) analysis.hasPlace = true;
            if (text.includes('ูุณู') || text.includes('ูุณู') || text.includes('ูุชุงุจ')) analysis.hasProblem = true;
            if (text.includes('ุญู') || text.includes('ูุฌุฏ') || text.includes('ุชุฐูุฑ') || text.includes('ุณุงุนุฏ')) analysis.hasSolution = true;
            
            // Check for story structure indicators
            if (text.includes('ูุงู') || text.includes('ูู ููู') || text.includes('ุฐุงุช ูุฑุฉ')) analysis.hasBeginning = true;
            if (text.includes('ุฃุฎูุฑุงู') || text.includes('ูู ุงูููุงูุฉ') || text.includes('ุชุนูู') || text.includes('ูููุฐุง')) analysis.hasEnding = true;

            let score = Object.values(analysis).filter(Boolean).length;
            let feedback = [];

            if (analysis.hasCharacter) feedback.push('โ ุชู ุชุญุฏูุฏ ุงูุดุฎุตูุฉ ุงูุฑุฆูุณูุฉ');
            else feedback.push('โ ูู ูุชู ุฐูุฑ ุงูุดุฎุตูุฉ ุงูุฑุฆูุณูุฉ (ุฃุญูุฏ)');

            if (analysis.hasPlace) feedback.push('โ ุชู ุชุญุฏูุฏ ุงูููุงู');
            else feedback.push('โ ูู ูุชู ุฐูุฑ ุงูููุงู (ุงููุฏุฑุณุฉ)');

            if (analysis.hasBeginning) feedback.push('โ ุชูุฌุฏ ุจุฏุงูุฉ ูุงุถุญุฉ ูููุตุฉ');
            else feedback.push('โ ุงูุจุฏุงูุฉ ุบูุฑ ูุงุถุญุฉ');

            if (analysis.hasProblem) feedback.push('โ ุชู ุนุฑุถ ุงููุดููุฉ');
            else feedback.push('โ ูู ูุชู ุนุฑุถ ุงููุดููุฉ ุจูุถูุญ');

            if (analysis.hasSolution) feedback.push('โ ุชู ุชูุฏูู ุญู ูููุดููุฉ');
            else feedback.push('โ ูู ูุชู ุชูุฏูู ุญู ูุงุถุญ');

            if (analysis.hasEnding) feedback.push('โ ุชูุฌุฏ ููุงูุฉ ููุงุณุจุฉ');
            else feedback.push('โ ุงูููุงูุฉ ุบูุฑ ูุงุถุญุฉ');

            let color = 'red';
            let message = 'ุชุญุชุงุฌ ุฅูู ุชุทููุฑ ุงููุตุฉ ุฃูุซุฑ';
            
            if (score >= 5) {
                color = 'green';
                message = 'ูุตุฉ ููุชุงุฒุฉ! ุชุญุชูู ุนูู ุฌููุน ุงูุนูุงุตุฑ ุงููุทููุจุฉ';
            } else if (score >= 3) {
                color = 'yellow';
                message = 'ูุตุฉ ุฌูุฏุฉุ ููู ูููู ุชุญุณูููุง';
            }

            analysisDiv.innerHTML = `
                <div class="bg-${color}-100 text-${color}-800 p-4 rounded-lg">
                    <h4 class="font-bold text-lg mb-3">๐ ุชุญููู ูุตุชู</h4>
                    <p class="mb-3"><strong>ุงููุชูุฌุฉ:</strong> ${score}/6 - ${message}</p>
                    <ul class="space-y-1 text-sm">
                        ${feedback.map(item => `<li>${item}</li>`).join('')}
                    </ul>
                    <div class="mt-3 p-3 bg-white rounded border">
                        <strong>๐ก ูุตุงุฆุญ ููุชุญุณูู:</strong>
                        <ul class="text-sm mt-2 space-y-1">
                            <li>โข ุชุฃูุฏ ูู ูุฌูุฏ ุจุฏุงูุฉ ูุงุถุญุฉ ุชูุฏู ุงูุดุฎุตูุฉ ูุงูููุงู</li>
                            <li>โข ุงุนุฑุถ ุงููุดููุฉ (ูุณูุงู ุงููุชุงุจ) ุจูุถูุญ</li>
                            <li>โข ูุฏู ุญูุงู ููุทููุงู ูููุดููุฉ</li>
                            <li>โข ุงุฎุชุชู ุงููุตุฉ ุจููุงูุฉ ููุงุณุจุฉ ูุฏุฑุณ ูููุฏ</li>
                        </ul>
                    </div>
                </div>
            `;
            
            analysisDiv.classList.remove('hidden');
        }

        // Add hover effects to story highlights
        document.addEventListener('DOMContentLoaded', function() {
            const highlights = document.querySelectorAll('.highlight');
            highlights.forEach(highlight => {
                highlight.addEventListener('mouseenter', function() {
                    this.style.transform = 'scale(1.05)';
                    this.style.transition = 'all 0.2s ease';
                });
                
                highlight.addEventListener('mouseleave', function() {
                    this.style.transform = 'scale(1)';
                });
            });
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9827f18dc2a01274',t:'MTc1ODQ0MDczMi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
